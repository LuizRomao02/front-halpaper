<app-toast #toast></app-toast>
<app-loading [visible]="isLoading"></app-loading>

<div class="form-container">
  <h2>Cadastro do Usu√°rio</h2>
  <form (ngSubmit)="cadastrar()" #formRef="ngForm">

    <label for="nome">Nome</label>
    <input id="nome" name="nome" type="text" [(ngModel)]="nome" placeholder="Digite o nome" required />

    <label for="sobrenome">Sobrenome</label>
    <input id="sobrenome" name="sobrenome" type="text" [(ngModel)]="sobrenome" placeholder="Digite o sobrenome" required />

    <label for="email">E-mail</label>
    <input id="email" name="email" type="email" [(ngModel)]="email" placeholder="Digite o e-mail" required />

    <label for="senha">Senha</label>
    <input id="senha" name="senha" type="password" [(ngModel)]="senha" placeholder="Digite a senha" required />

    <label>Acessos</label>
    <div class="checkbox-group">
      <label *ngFor="let acesso of acessosDisponiveis" class="checkbox-label">
        <input
          type="checkbox"
          [value]="acesso"
          (change)="toggleAcesso(acesso)"
          [checked]="acessosSelecionados.includes(acesso)"
        />
        {{ acesso }}
      </label>
    </div>
    <!-- mensagem de erro se submeter sem nenhum checkbox marcado -->
    <div *ngIf="formRef.submitted && acessosSelecionados.length === 0" class="error">
      Seleciona ao menos um tipo de acesso.
    </div>

    <button type="submit" [disabled]="isLoading">Cadastrar</button>
  </form>
</div>
